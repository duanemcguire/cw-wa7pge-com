{% extends 'editorial-base.html' %}


{% block content %}
  <h1>Winnie The Pooh CW</h1>
  <div class="optionContainer">
    <table style="max-width: 500px;">
    <tr>  
    <td>WPM</td>
    <td>
    <select name="wpm" id="wpm">
      <option value="12">12</option>
      <option value="15">15</option>
      <option value="18">18</option>
      <option selected value="20">20</option>
      <option value="25">25</option>
      <option value="30">30</option>
      <option value="40">40</option>
    </select>
    </td>
    </tr>
    <tr>
      <td>Page</td>
      <td>
      <select name="wpage" id="wpage">
        <option value=""></option>
      </select>
      </td>
    </tr>
  </table>  
  </div>
  <div>
    <audio id="cwPlayer" controls></audio>
  </div>
  <a href="https://duanemcguire.nyc3.cdn.digitaloceanspaces.com/cw-books/winnie-the-pooh/$_winnie-paginated.txt" target="_blank">View the text of Winnie the Pooh</a>
  <script>
    const select = document.getElementById('wpage');
    const audio = document.getElementById('cwPlayer'); 
    const wpm = document.getElementById('wpm') 
    const mp3Prefix = "https://duanemcguire.nyc3.cdn.digitaloceanspaces.com/cw-books/winnie-the-pooh/winnie-"
    var wpmvalue = 20
    var pagevalue = ""
    for (let i = 0; i <= 123; i++) {
      const value = i.toString().padStart(4, '0');
      const option = document.createElement('option');
      const wpm = 
      option.value = value;
      option.textContent = i;
      select.appendChild(option);
    }
    select.addEventListener('change', () => {
      pagevalue = select.value;
      if (pagevalue) {
        wpmvalue = wpm.value;
        audio.src = mp3Prefix + wpmvalue + "wpm-page-"  + pagevalue + ".mp3";
        console.log(audio.src)
        audio.play();
      }
    })
    wpm.addEventListener('change', () => {
      const wpmvalue= wpm.value;
      if (wpmvalue) {
        pagevalue = select.value;
        audio.src = mp3Prefix + wpmvalue + "wpm-page-"  + pagevalue + ".mp3";
        console.log(audio.src)
        audio.play();
      }
    })

</script>
  
  {% endblock %}  
  
  